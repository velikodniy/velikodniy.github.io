https://twitter.com/vlcdn/status/1352373414821060614

Вы, наверное, видели софизм, где диагональ единичного квадрата постепенно приближается ступеньками. Длина ломаной, очевидно равна 2 независимо от числа ступенек. В пределе она приближается к диагонали, из чего делается вывод, что диагональ равна 2.
Давайте разбираться.

https://pbs.twimg.com/media/EsSYdAQXEAQ_xkI?format=jpg&name=medium

Эти рассуждения в интернете называются по-разному. В Wolfram Math World соответствующая статья озаглавлена Diagonal Paradox. (Оттуда я картинку и стащил.)
https://mathworld.wolfram.com/DiagonalParadox.html

Впервые я про этот парадокс прочитал ещё в школе, в одной научно-популярной книжке по информатике (кстати, интересной, вспомню называние — скину). В ней была такая задачка. Но без решения. Задачка мне тогда сломала мозг, так как я был в классе, не помню, седьмом, наверное.

В интернете я не раз на него натыкался, но везде это был просто вопрос, без разбора. В комментариях же почти все объяснения сводились к тому, что «этого не может быть, потому что этого не может быть никогда».

Что же не так с этим парадоксом? Мы же знаем, что длина диагонали единичного квадрата равна √2. Теорема Пифагора и всё такое. Не может быть тут 2.
Стоп, а всегда ли? Что такое вообще длина и диагональ?
Оказывается, эти определения — ключ к решению.

Можно по-разному вводить эти понятия. Но удобнее, как мне кажется, начать, с понятия расстояния.
В математике расстояние можно вводить по-разному. Для одного и того же множества (а что такое плоскость, как не множество точек?) можно задать разные способы вычисления расстояний.

Расстояние — это просто метод, по которому мы каждой паре точек сопоставляем некоторое число. И тем самым задаём то, что называется метрическим пространством.
Но не всякий метод будет расстоянием. На расстояние накладывается несколько ограничений, исходящих из здравого смысла.

1) Расстояние между A и B равно 0 тогда и только тогда, когда они совпадают.
2) Длина AB равна BA.
3) И неравенство треугольника: AB+BC ≤ AC. (Логично же. Прямой путь короче, чем если мы по пути заедем куда-то.)
Любая формула для расстояния, для которой всё это верно, законна.

По поводу 2) есть анекдот.
Решил мужик сдать удава в зоопарк. И директор его спрашивает:
— А что он умеет?
— А он от головы до хвоста 4 метра, а от хвоста до головы 3!
— Как так? Лицо с открытым ртом
— Ну вот смотрите. От понедельника до пятницы 4 дня, а от пятницы до понедельника 3. Так и тут.

Расстояние у нас есть (если хотите выпендриться, лучше сказать, что мы задали метрическое пространство). А что такое диагональ? Это отрезок. А отрезок? Ну, отрезок прямой. А прямая? Ну-у-у… Это… Это такая прямая…
Да, в математике некоторые понятия первичны.

Если у нас есть расстояние, то отрезок можно определить как самую короткую кривую, соединяющую эти две линии. И длина этой кривой равна расстоянию между концами.
А почему кривую? А потому что мы можем так хитро задать расстояние, что кратчайшим расстоянием будет некая загогулина.

Как узнать, что кривая самая короткая, если мы (спойлер) только через пару твитов определим длину?
Например, можно сказать, что это такая кривая, что если разбить её в любой точке на две, то для концов и этой точки неравенство треугольника будет равенством.

Например, если мы рассматриваем геометрию на сфере, то кратчайшие расстояния — это дуги.
Чтоб не было путаницы, для искривлённых пространств кратчайшую кривую называют геодезической.

Итак, мы тут упомянули длину. Из определения отрезка (ну, вообще, не то, чтобы отрезка, но будем так его называть) мы знаем, как найти его длину. Но мы пока не знаем, как искать длины остальных кривых.

Те, кто изучал матан, наверное, вспомнили про спрямление.
Длина кривой по определению — это точная верхняя грань всех ломаных, вершины которых лежат на кривой.
А длину ломаной мы измерить можем, она же из отрезков состоит.

Если быть точным, то ломаных, вписанных в кривую так, чтоб точки на кривой шли подряд. То есть без всяких там петелек, а то так можно длину до бесконечности растянуть.
Вы поняли, в общем.

То есть, разбиваем кривую на множество бесконечно маленьких отрезочков. Предел длины таких разбиений — это и есть искомая длина.
(Картинка из Википедии.)

https://pbs.twimg.com/media/EsSYei4XcAIZMen?format=jpg&name=900x900

Так вот, та процедура из парадокса — это не спрямление. Часть точек лесенки не лежит на прямой. А значит, по неравенству треугольника там будет не равенство, а неравенство (извините).
Длина диагонали ≤ 2. Мир не рухнул.

Немного смущает знак ≤. А может быть, что диагональ равна 2? Оказывается, может. Есть много странных способов вычислять расстояния.
Например, ход короля в шахматах. Он может ходить по диагонали, вертикали и горизонтали. Но это всегда один ход.
Диагональ = 1.

А есть манхэттэнская метрика. На о. Манхэттэн дома расположены квадратно-гнездоввм способом. А раз срезать нельзя, то расстояние между углами квартала равно для таксиста сумме расстояний сторон.
Диагональ = 2.
А 3 может? Не может. Неравенство треугольника!

Забыл добавить. В манхэттэнской метрике ступеньки и будут диагональю, так как это кратчайшая кривая. И даже две угловые стороны квадрата будут диагональю. Ведь это тоже кратчайшая кривая. Шок-контент!

— Только это уже будет на квадрат, а шар.
— Точнее, сфера. Но от этого он же не перестанет быть квадратом? :)
— А что такое квадрат?
— 4-угольник с равными сторонами и прямыми углами.
Но вообще, вопрос очень хороший и достойный длинного треда. :)
— Только для углов нужно скалярное произведение. А скалярное произведение тебе дает сразу метрику. И эта метрика будет конфликтовать с твоей
— Вообще, да. Если мы говорим конкретно про манхеттэнскую метрику L1, то скалярное произведение там задать невозможно. И вообще, среди пространств с метрикой Lp только L2 будет предгильбертовым, насколько я помню.
— Невозможно, разумеется, задать скалярное произведение, порождающее требуемую метрику. А вот, хотим ли мы в этой задаче несоответствующие друг другу норму и произведение — это уже интересно.
Собственно, потому я и написал, что это хороший вопрос.


Кстати, с ломаными связан очень интересный парадокс береговых линий. О нём писал Мандельброт в своей книжке о фракталах (рекомендую!).
Как измерить длину береговой линии по карте? Пройтись вдоль неё циркулем-измерителем. Все учили географию и знают.

Если взять меньший раствор циркуля, то длина береговой линии получится больше, так как мы захватим больше мелких деталей. Неравенство треугольника!
Интересно, что у соседних стран в атласах длина общей границы может заметно отличаться. Хотя это одна и та же граница.

В общем теперь вы знаете, что говорить, если вам пришлют такую картинку.
— Всё верно. В манхэттэнской метрике π = 4.

https://pbs.twimg.com/media/EsSYfXwXIAMecZv?format=jpg&name=medium

Можно было бы кроме длины поговорить и об объёме, вспомнить меру Лебега. Но у твиттера есть лимит на тред, отправляемый одним разом, так что в другой раз.
И так я что-то увлёкся клиповым научпопом. Твиттер не для этого делали. :)


